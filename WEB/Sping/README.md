# 스프링 Spring 웹 개발
> 해당 페이지에는 웹 애플리케이션 개발을 위한 스프링의 내용을 담았다. 스프링의 특징과 기능 관련해서는 https://github.com/foskingson/STUDY/tree/main/JAVA/Spring 해당 페이지로 이동하자.

<br>
<br>
<br>

## 서블릿
> 웹에서 서블릿(Servlet)은 자바 웹 애플리케이션을 구성하는 중요한 구성 요소 중 하나이다. 서블릿은 동적인 웹 페이지를 생성하거나, HTTP 요청에 응답하기 위한 자바 클래스이다. 서블릿은 주로 웹 애플리케이션 서버(WAS)에서 실행됩니다. 클라이언트의 HTTP 요청이 있을 때마다 서블릿 컨테이너는 해당 요청을 처리하기 위해 적절한 서블릿을 호출하고, 서블릿은 요청을 처리하고 HTTP 응답을 생성하여 클라이언트에게 반환하는 역할을 한다..
- 클라이언트가 요청하면 쓰레드가 서블릿을 호출한다.
- 기본적으로 WAS가 서블릿 컨테이너의 생명주기와 관리를 담당 한다.
    - 서블릿 객체는 최초 로딩 시점에 생성되어 싱글톤으로 관리된다.


<br>

- 서블릿 작업 수행 과정
```
1. HTTP 요청 분석 및 처리: 클라이언트의 HTTP 요청을 읽어 들이고, 필요한 작업을 수행합니다. 이 작업에는 사용자가 입력한 데이터를 읽는 것이 포함될 수 있습니다.

2. 비즈니스 로직 실행: 요청에 따라 비즈니스 로직을 실행하고, 데이터베이스나 다른 외부 시스템과의 상호 작용을 처리합니다.

3.HTTP 응답 생성: 클라이언트에게 반환할 HTML, XML, JSON 등의 콘텐츠를 생성하고, HTTP 응답을 생성하여 클라이언트에게 반환합니다.
```

<br>

> 일반적으로 HttpServlet 클래스를 상속하여 서블릿을 작성하며, 이를 통해 HTTP 프로토콜을 통한 통신을 간편하게 처리할 수 있다.

<br>
<br>
<br>


## 동시요청 - 멀티 쓰레드
> 애플리케이션 코드를 하나하나 순차적으로 실행하는 것을 쓰레드라고 한다. 동시 처리가 필요할때 멀티 쓰레드를 사용한다. 멀티 쓰레드에 대한 부분을 WAS가 처리해준다. 개발자가 멀티 쓰레드 관련 코드를 신경쓰지 않고 설정만 따로 해주면 된다.

- 예를 들어 자바 메인 메서드를 처음 실행하면 main이라는 이름의 쓰레드가 실행된다.

<br>

#### 요청마다 쓰레드를 생성할 경우
- 장점 
    - 동시 요청을 처리할 수 있다.
    - 리소스가 허용할 때까지 처리 가능하다.
    - 하나의 쓰레드가 지연되도 나머지는 정상작동한다.
- 단점 
    - 쓰레드의 생성 비용은 비싸다. (컨텍스트 스위칭 비용도 많이 발생한다.)
    - 요청이 올때마다 쓰레드를 생성하면 응답속도가 늦어진다.
    - 쓰레드 생성에 제한이 없다. (고객 요청이 너무 많으면 쓰레드가 계속 생성되어 CPU,메모리 임계점이 넘어서 서버가 죽을 수 있다.)

<br>

#### 쓰레드 풀
> 쓰레드를 미리 정해놓은 개수 만큼 만들어놓고 요청을 처리할때 하나를 사용하고 다 사용하면 다시 쓰레드 풀에 반납한다. 쓰레드 풀에 남는 쓰레드가 없으면 대기하거나 거절한다. 톰캣은 최대 200개가 기본 설정이다.

- 최대 쓰레드 수를 조절하는게 제일 중요하다.(튜닝 포인트)
    - 너무 낮게 설정하고 동시 요청이 많을때 서버 리소스는 여유롭지만 클라이언트는 금방 응답이 지연된다.
    - 너무 높게 설정하고 동시 요청이 많을 때 CPU,메모리 리소스 임계점 초과로 서버 다운된다.
    - 최대한 실제 서비스와 유사하게 성능 테스트를 시도해봐야 한다.

- 장점 
    - 쓰레드가 미리 생성되 있으므로 쓰레드를 생성하고 종료하는 비용이 절약되고 응답이 빠르다.
    - 생성 가능한 쓰레드의 최대치가 있으므로 너무 많이 요청이 들어와도 기존 요청은 안전하게 처리 가능하다.

<br>
<br>
<br>

## 서버 사이드 렌더링 SSR 
> 서버에서 최종 HTML을 생성해서 클라이언트에 전달한다. 주로 정적인 화면에 사용된다. JSP, 타임리프(선호)과 같은 템플릿 엔진을 사용할 수 있다.

<br>

## 클라이언트 사이드 렌더링 CSR
> HTML결과를 자바스크립트를 사용해 웹 브라우저에서 동적으로 생성해서 적용된다. 주로 동적인 화면에 사용된다. 

- React, Vue.js는 SSR과 CSR 전부 지원하는 웹 프레임워크이다.



## Postman
>Postman은 API 개발 및 테스트를 위한 협업 플랫폼으로, 다양한 기능을 제공하여 API 개발 및 테스트 작업을 효율적으로 수행할 수 있도록 지원한다.

-  Postman을 사용하여 다양한 유형의 API 요청(GET, POST, PUT, DELETE 등)을 생성하고 실행할 수 있다. 또한 API 응답을 확인하고 관리할 수 있다.
    - Postman을 통해 원하는 주소로 request요청을 보내볼 수 있다.




## HttpServlet
- 먼저 메인 애플리케이션 파일에 `@ServletComponentScan`를 붙이고 서블릿 파일에 `@WebServlet(name = "name", urlPatterns ="/")`를 붙여주고 `extends HttpServlet` 인터페이스에서 상속받아 온다.

<br>


### HTTP API
- HTTP Request API
    - 요청 정보 조회 : RequestHeaderServlet 파일 참고
    - 요청 파라미터 정보 조회 : RequestParamServlet 파일 참고 (get,post로 들어온 데이터)
    - 요청 바디 정보 조회 : RequestBodyStringServlet 파일 참고 (단순 텍스트)
    - 요청 바디 정보 조회 : RequestBodyJsonServlet 파일 참고 (JSON 주로 사용) 
- HTTP Response API
    - HttpServletResponse 기본 사용법 : ResponseHeaderServlet 파일 참고
    - 응답 데이터 HTML 반환 : ResponseHtmlServlet 파일 참고
    - 응답 데이터 JSON 반환 : ResponseJsonServlet 파일 참고

<br>


<br>
<br>
<br>

## 템플릿 엔진
> 템플릿 엔진은 웹 애플리케이션에서 동적인 콘텐츠를 생성하는 데 사용되는 도구이다. 정적인 HTML 문서에 동적으로 데이터를 삽입하거나 반복문, 조건문 등의 로직을 적용하여 동적인 웹 페이지를 생성할 수 있다. 서블릿과 자바 코드만으로도 동적인 HTML을 구현할 수 있지만 코드가 매우 복잡하고 비효율적이다. 따라서 자바 코드로 HTML을 만드는 것보다 차라리 HTML 문서에 동적으로 변경해야 하는 부분만 자바 코드를 넣으면 편리 할 것이다. 이것이 템플릿 엔진이 나온 이유이다.

- 템플릿 엔진에는 JSP, Thymeleaf 등이 있다. 주로 Thymeleaf를 사용한다.
- 템플릿 엔진에는 html안에서 제어문을 수행할 수 있는 태그 라이브러리를 제공한다.


<br>
<br>
<br>

## 프론트 컨트롤러
> 프론트 컨트롤러는 웹 애플리케이션의 진입점이며, 클라이언트로부터의 모든 요청을 처리하는 주요 컴포넌트이다. 간단한 프론트 컨트롤러의 예시로는 서블릿 기반의 웹 애플리케이션을 들 수 있다.
주로 공통된 로직을 처리할 때 사용된다.


## 기타

<br>

#### /WEB-INF
>이 경로안에 JSP가 있으면 외부에서 직접 JSP를 호출할 수 없다. 우리가 기대하는 것은 항상 컨트롤러를 통해서
JSP를 호출하는 것이다.

<br>
<br>

#### request.setAttribute()
> 해당 기능을 사용해 request객체에 데이터를 보관해서 뷰에 전달할 수 있다. request를 데이터를 보관하는 Model로 사용할 수 있다.